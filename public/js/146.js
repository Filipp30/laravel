(self.webpackChunk=self.webpackChunk||[]).push([[146],{7814:(t,e,s)=>{"use strict";s.d(e,{Z:()=>i});var a=s(3645),n=s.n(a)()((function(t){return t[1]}));n.push([t.id,".chat[data-v-1173ad8c]{display:flex}.chat__wait[data-v-1173ad8c]{height:520px}.chat__wait .title[data-v-1173ad8c]{margin:0;height:20px}.chat__wait .spinner[data-v-1173ad8c]{margin:auto;height:80px;width:80px}.chat__wait .wait_container[data-v-1173ad8c]{padding:10px}.chat__wait .wait_container .item[data-v-1173ad8c]{background-color:#577e3e;width:300px;height:160px;line-height:1.4;display:flex;flex-direction:column;justify-content:center;padding-left:10px;box-shadow:0 0 3px 2px rgba(0,0,0,.75)}.chat__wait .wait_container .item[data-v-1173ad8c]:hover{box-shadow:0 0 0 3px rgba(0,0,0,.75)}.chat__wait .active[data-v-1173ad8c]{border:1px solid #f50511}.chat__template[data-v-1173ad8c]{box-shadow:0 1px 18px -3px rgba(0,0,0,.75);height:520px;max-width:450px;flex-direction:column;margin-left:20px}.chat__template[data-v-1173ad8c],.chat__template .header[data-v-1173ad8c]{display:flex;justify-content:space-between}.chat__template .header[data-v-1173ad8c]{flex:1;align-items:center;padding:0 10px;border-bottom:1px solid #1a202c}.chat__template .header button[data-v-1173ad8c]{outline:none;border:1px solid #fff;border-radius:2px;background-color:grey;color:#fff;font-size:20px}.chat__template .header button[data-v-1173ad8c]:hover{cursor:pointer;background-color:transparent;border-radius:2px;border:1px solid #000;color:#000}.chat__template .messages[data-v-1173ad8c]{height:400px;overflow-y:auto;padding:1px 10px}.chat__template .messages[data-v-1173ad8c]::-webkit-scrollbar{width:6px}.chat__template .messages[data-v-1173ad8c]::-webkit-scrollbar-track{background:#ddd}.chat__template .messages[data-v-1173ad8c]::-webkit-scrollbar-thumb{background:#bdbdbd}.chat__template .inp_form[data-v-1173ad8c]{border-top:1px solid #1a202c;margin-bottom:0;flex:1;display:flex;padding:10px}.chat__template .inp_form .input[data-v-1173ad8c]{border-radius:3px;font-size:17px;flex:8;background:#ddd;height:40px}.chat__template .inp_form .btn[data-v-1173ad8c]{border-radius:3px;flex:1;margin-left:10px;background:#577e3e;color:#fff;font-weight:700;cursor:pointer;transition:background .23s}.chat__template .inp_form .btn[data-v-1173ad8c]:hover{background:#577e3e}.chat__template .info_bottom[data-v-1173ad8c]{margin:0 110px;font-size:15px;height:0}",""]);const i=n},5910:(t,e,s)=>{"use strict";s.d(e,{Z:()=>i});var a=s(3645),n=s.n(a)()((function(t){return t[1]}));n.push([t.id,".on_event[data-v-3b3bb40e]{width:300px;height:25px;display:flex;justify-content:space-between}.on_event .new_message[data-v-3b3bb40e],.on_event .typing[data-v-3b3bb40e]{width:150px;font-weight:700}",""]);const i=n},2146:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>f});var a=s(2487),n=s(6486);const i={name:"Wait_Item_Event",props:["session","bool"],data:function(){return{new_message:!1,typing:!1,reset_typing:(0,n.debounce)((function(){this.typing=!1}),2e3),active:!1}},mounted:function(){var t=this;Echo.private("my-channel").listenForWhisper("typing",(function(e){e.session===t.session&&(t.typing=!0,t.reset_typing())})).listen("NewMessage",(function(e){e.session===t.session&&(t.new_message=!0)}))},watch:{bool:function(){this.new_message=!1,this.active=!0}}};var o=s(3379),c=s.n(o),r=s(5910),_={insert:"head",singleton:!1};c()(r.Z,_);r.Z.locals;var d=s(1900);const l=(0,d.Z)(i,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.active?t._e():s("div",{staticClass:"on_event"},[s("div",{staticClass:"new_message"},[t.new_message?s("p",[t._v("new message !")]):t._e()]),t._v(" "),s("div",{staticClass:"typing"},[t.typing?s("p",[t._v("typing...")]):t._e()])])}),[],!1,null,"3b3bb40e",null).exports,p={name:"Chat",components:{Spinner:a.Z,Wait_Item_Event:l},data:function(){return{messages:[],sessions:[],admin_session:"",admin_name:"",name_typing:"",reset_typing:(0,n.debounce)((function(){this.name_typing=""}),1e3),form:{input_message:"",name:"",chat_session:""},errors:{info:""},spinner_wait_list:!1,spinner_chat:!1,session_active:"",child_new_message_show:"",bool_child:!1}},mounted:function(){var t=this;this.spinner_wait_list=!0,axios.get("api/admin/chat/chat_waiting_list").then((function(e){t.sessions=e.data,t.spinner_wait_list=!1})).catch((function(e){t.errors.info=e})),axios.get("/api/user").then((function(e){t.admin_name=e.data.name}));var e=this;Echo.private("my-channel").listenForWhisper("typing",(function(t){t.session===e.admin_session&&(e.name_typing=t,e.reset_typing())})).listen("NewMessage",(function(t){e.form.chat_session===t.session&&e.add_message_to_local_data(t)})).listen("CallAdmin",(function(t){e.get_chat_session_to_local_wait_list(t.session)})).listen("RemoveChatSession",(function(t){e.remove_chat_session_from_local_wait_list(t.session)}))},methods:{on_session_clicked:function(t){var e=this;this.bool_child=!this.bool_child,this.admin_session=t,this.form.chat_session=t,this.spinner_chat=!0,document.getElementById(t).classList.add("active"),axios.get("api/chat/get_all_messages",{params:{chat_session:this.admin_session}}).then((function(t){e.messages=t.data,e.spinner_chat=!1})).catch((function(t){e.errors.info=t}))},post_message:function(){var t=this;this.errors.info="shipment...",axios.post("api/chat/add_message",this.form).then((function(e){t.form.input_message="",t.errors.info="send",setTimeout((function(){t.errors.info=""}),1500)})).catch((function(e){t.errors.info=e}))},add_message_to_local_data:function(t){this.messages.push({created_at:t.time,message:t.message,user:{name:t.name}})},get_chat_session_to_local_wait_list:function(t){var e=this;axios.get("api/admin/chat/get_chat",{params:{chat_session:t}}).then((function(t){e.sessions.push(t.data[0])})).catch((function(t){console.log(t)}))},remove_chat_session_from_local_wait_list:function(t){for(var e=0;e<this.sessions.length;e++)this.sessions[e].session===t&&this.sessions.splice(e,1)}},watch:{"form.input_message":function(){Echo.private("my-channel").whisper("typing",{name:this.admin_name,session:this.admin_session})}},filters:{getTime:function(t){return t.substr(11,8)},getDatum:function(t){return t.substr(0,10)}}};var m=s(7814),h={insert:"head",singleton:!1};c()(m.Z,h);m.Z.locals;const u={name:"Product_Items"};const v={name:"Admin",components:{Chat:(0,d.Z)(p,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"chat"},[s("section",{staticClass:"chat__wait"},[s("p",{staticClass:"title"},[t._v("Users-List")]),t._v(" "),s("div",{staticClass:"spinner_wait_list"},[t.spinner_wait_list?s("Spinner"):t._e()],1),t._v(" "),t._l(t.sessions,(function(e){return s("div",{key:t.sessions.id,staticClass:"wait_container",attrs:{id:e.session}},[s("article",{staticClass:"item",on:{click:function(s){return t.on_session_clicked(e.session)}}},[s("h5",[t._v("Session : "),s("span",[t._v(t._s(e.session))])]),t._v(" "),s("p",[t._v("Time start:"),s("span",[t._v(t._s(t._f("getTime")(e.created_at)))])]),t._v(" "),s("p",[t._v("User name : "),s("span",[t._v(t._s(e.user.name))])]),t._v(" "),s("p",[t._v("User email : "),s("span",[t._v(t._s(e.user.email))])]),t._v(" "),s("p",[t._v("Registration date : "),s("span",[t._v(t._s(t._f("getDatum")(e.user.created_at)))])]),t._v(" "),s("Wait_Item_Event",{attrs:{bool:t.bool_child,session:e.session}})],1)])}))],2),t._v(" "),s("section",{staticClass:"chat__template"},[s("header",{staticClass:"header"},[s("h1",[t._v("Chat")]),t._v(" "),t.name_typing?s("p",[t._v(t._s(t.name_typing.name)+" typing...")]):t._e(),t._v(" "),s("button",[t._v("Close")])]),t._v(" "),t.spinner_chat?s("Spinner"):t._e(),t._v(" "),s("section",{directives:[{name:"chat-scroll",rawName:"v-chat-scroll"}],staticClass:"messages",attrs:{id:"mess"}},t._l(t.messages,(function(e){return t.messages?s("div",{key:t.messages.id},[s("p",[t._v(t._s(t._f("getTime")(e.created_at))+" - "+t._s(e.user.name)+" :")]),t._v(" "),s("p",[t._v(t._s(e.message))]),t._v(" "),s("hr")]):t._e()})),0),t._v(" "),s("form",{staticClass:"inp_form",on:{submit:function(e){return e.preventDefault(),t.post_message(e)}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.input_message,expression:"form.input_message"}],staticClass:"input",attrs:{type:"text",placeholder:"Enter your message..."},domProps:{value:t.form.input_message},on:{input:function(e){e.target.composing||t.$set(t.form,"input_message",e.target.value)}}}),t._v(" "),s("button",{staticClass:"btn",attrs:{type:"submit"}},[t._v("Send")])]),t._v(" "),t.errors.info?s("p",{staticClass:"info_bottom"},[t._v(t._s(t.errors.info))]):t._e()],1)])}),[],!1,null,"1173ad8c",null).exports,Product_Items:(0,d.Z)(u,(function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)}),[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h1",[t._v("Product items")])])}],!1,null,"194efe52",null).exports},data:function(){return{chat:!0,product_items:!1}}};const f=(0,d.Z)(v,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h1",[t._v("Admin")]),t._v(" "),s("nav",[s("button",{on:{click:function(e){t.chat=!t.chat}}},[t._v("Chat")]),t._v(" "),s("button",{on:{click:function(e){t.product_items=!t.product_items}}},[t._v("Product-Items")])]),t._v(" "),s("section",[t.chat?s("Chat"):t._e(),t._v(" "),t.product_items?s("Product_Items"):t._e()],1)])}),[],!1,null,"37c7241f",null).exports}}]);